let parallax=document.querySelectorAll(".parallax"),VH=window.innerHeight,parallaxSpeed=.25,posY=0;parallax.forEach((function(p){p.getAttribute("speed")||p.setAttribute("speed",parallaxSpeed);let speed=p.getAttribute("speed"),height=p.clientHeight,scale=(VH-height)*speed;p.setAttribute("calc",.5*(VH-height)),p.setAttribute("offset",p.getBoundingClientRect().top+window.pageYOffset),null==p.getAttribute("noscale")&&(p.style.height=height+scale+"px",p.style.top=-.5*scale+"px"),null!==p.getAttribute("x")?p.style.transform="translate3d("+(0-p.getAttribute("offset")+parseInt(p.getAttribute("calc")))*p.getAttribute("speed")+"px, 0, 0)":(p.style.transform="translate3d(0,"+(0-p.getAttribute("offset")+parseInt(p.getAttribute("calc")))*p.getAttribute("speed")+"px, 0)",null==p.getAttribute("y")&&p.setAttribute("y",""))}));let parX=document.querySelectorAll(".parallax[x]"),parY=document.querySelectorAll(".parallax[y]");window.addEventListener("scroll",(function(){posY=window.scrollY,parX.forEach((function(p){p.style.transform="translate3d("+(posY-p.getAttribute("offset")+parseInt(p.getAttribute("calc")))*p.getAttribute("speed")+"px, 0, 0)"})),parY.forEach((function(p){p.style.transform="translate3d(0,"+(posY-p.getAttribute("offset")+parseInt(p.getAttribute("calc")))*p.getAttribute("speed")+"px, 0)"}))}));